"use strict";(self.webpackChunkgamestudio_refactor=self.webpackChunkgamestudio_refactor||[]).push([[782],{490:(_,d,c)=>{c.r(d),c.d(d,{BlocksModule:()=>k});var p=c(782),t=c(256),a=c(895);let u=(()=>{class n{constructor(){this.color=null}getStyle(){switch(this.color){case"red":return"block block-color block-red";case"green":return"block block-color block-green";case"blue":return"block block-color block-blue";case"yellow":return"block block-color block-yellow";default:return"block"}}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-blocks-tile"]],inputs:{color:"color"},decls:1,vars:1,consts:[[1,"block",3,"ngClass"]],template:function(o,e){1&o&&t._UZ(0,"div",0),2&o&&t.Q6J("ngClass",e.getStyle())},dependencies:[a.mk],styles:['.block[_ngcontent-%COMP%]{position:relative;width:50px;height:50px;transition:transform 90ms ease-in-out;box-sizing:border-box;overflow:hidden}.block-color[_ngcontent-%COMP%]{border:1px solid rgb(26,26,26)}.block-color[_ngcontent-%COMP%]:before{content:"";position:absolute;width:120px;height:120px;top:-10px;left:-10px;border-radius:100px;background-color:#000;opacity:.2}.block-color[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100px;height:100px;top:-40px;left:-50px;border-radius:100px;background-color:#fff;opacity:.1}.block-color[_ngcontent-%COMP%]:hover{transform:scale(1.1);filter:brightness(1.3);cursor:pointer}.block-red[_ngcontent-%COMP%]{background-color:#8a2a2a}.block-green[_ngcontent-%COMP%]{background-color:#2d9644}.block-blue[_ngcontent-%COMP%]{background-color:#2f3087}.block-yellow[_ngcontent-%COMP%]{background-color:#ffbf00}@media (max-width: 760px){.block[_ngcontent-%COMP%]{width:35px;height:35px}}@media (max-width: 535px){.block[_ngcontent-%COMP%]{width:25px;height:25px}}']}),n})();function h(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"div")(1,"app-blocks-tile",14),t.NdJ("click",function(){const l=t.CHM(o).index,i=t.oxw().index,C=t.oxw();return t.KtG(C.tryToClearBlock(l,i))}),t.qZA()()}if(2&n){const o=r.$implicit,e=t.oxw().index;t.xp6(1),t.Q6J("color",o[e].color)}}function g(n,r){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,h,2,1,"div",13),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.board)}}function f(n,r){1&n&&(t.TgZ(0,"div",15),t._uU(1,"YOU lOST"),t.qZA())}function b(n,r){if(1&n&&(t.TgZ(0,"div",16),t._uU(1,"YOU WON "),t.TgZ(2,"p"),t._uU(3,"score:"),t.qZA(),t.TgZ(4,"h3"),t._uU(5),t.qZA()()),2&n){const o=t.oxw();t.xp6(5),t.Oqu(o.score)}}function m(n,r){1&n&&(t.TgZ(0,"div",17),t._uU(1,"Resetting"),t.qZA())}const x=[{path:"",component:(()=>{class n{constructor(){this.board=[],this.rows=5,this.cols=15,this.emptyColumnIndex=-1,this.lastEmptyColumnIndex=this.cols-1,this.status="playing",this.score=0,this.adjacentScoreCount=0}ngOnInit(){this.generateBoard()}generateBoard(){for(let o=0;o<this.rows;o++){this.board.push([]);for(let e=0;e<this.cols;e++)this.board[o].push({color:this.getRandomColor()})}}getRandomColor(){switch(Math.floor(4*Math.random())){case 0:return"red";case 1:return"green";case 2:return"blue";case 3:return"yellow"}return null}tryToClearBlock(o,e){for(this.hasSameAdjacentAndNotNull(o,e)&&this.clearBlock(o,e);this.hasEmptyColumn();)this.moveEmptyLeft();this.hasNoMoreMoves()&&(this.status="won")}clearBlock(o,e){let s=this.board[o][e].color;this.board[o][e].color=null,this.clearAdjacentBlock(o,e,s);do{this.turnOnGravity()}while(this.hasFloatingBlocks());this.handleScore()}clearAdjacentBlock(o,e,s){const l=[[o-1,e],[o+1,e],[o,e-1],[o,e+1]];for(const i of l)i[0]>=0&&i[0]<this.rows&&i[1]>=0&&i[1]<this.cols&&this.board[i[0]][i[1]].color===s&&(this.clearBlock(i[0],i[1]),this.adjacentScoreCount++)}handleScore(){const e=Math.floor(Math.pow(10*this.adjacentScoreCount,1.6));this.score+=e,this.adjacentScoreCount=0}hasFloatingBlocks(){for(let o=1;o<this.rows;o++)for(let e=0;e<this.cols;e++)if(null==this.board[o][e].color&&null!=this.board[o-1][e].color)return!0;return!1}turnOnGravity(){for(let o=0;o<this.rows-1;o++)for(let e=0;e<this.cols;e++)null==this.board[o+1][e].color&&(this.board[o+1][e].color=this.board[o][e].color,this.board[o][e].color=null)}hasEmptyColumn(){let o=this.rows-1,e=this.lastEmptyColumnIndex;for(let s=0;s<e;s++)if(null==this.board[o][e-1-s].color)return this.emptyColumnIndex=e-1-s,!0;return!1}moveEmptyLeft(){for(let o=this.emptyColumnIndex+1;o<=this.lastEmptyColumnIndex;o++)for(let e=0;e<this.rows;e++)this.board[e][o-1].color=this.board[e][o].color;this.clearLastColumn(),this.lastEmptyColumnIndex--}clearLastColumn(){for(let o=0;o<this.rows;o++)this.board[o][this.lastEmptyColumnIndex].color=null}hasSameAdjacentAndNotNull(o,e){if(null==this.board[o][e].color)return!1;const s=[[o-1,e],[o+1,e],[o,e-1],[o,e+1]];for(let l of s)if(l[0]>=0&&l[0]<this.rows&&l[1]>=0&&l[1]<this.cols&&this.board[l[0]][l[1]].color==this.board[o][e].color)return!0;return!1}hasNoMoreMoves(){for(let o=0;o<this.rows;o++)for(let e=0;e<this.cols;e++)if(this.hasSameAdjacentAndNotNull(o,e))return!1;return!0}resetGame(){this.board=[],this.score=0,this.status="playing",this.generateBoard(),this.emptyColumnIndex=-1,this.lastEmptyColumnIndex=this.cols-1}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-blocks"]],decls:17,vars:5,consts:[[1,"main-wrapper"],[1,"box","box-title"],[1,"box"],[1,"status-item"],[1,"box-text"],[1,"box-numb"],[1,"btn-field",3,"click"],[1,"blocksField"],["class","blocksrow",4,"ngFor","ngForOf"],["class","overlay lose-screen",4,"ngIf"],["class","overlay win-screen",4,"ngIf"],["class","overlay reset-screen",4,"ngIf"],[1,"blocksrow"],[4,"ngFor","ngForOf"],[3,"color","click"],[1,"overlay","lose-screen"],[1,"overlay","win-screen"],[1,"overlay","reset-screen"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2"),t._uU(3,"Blocks"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"span",4),t._uU(7,"Score: "),t.qZA(),t.TgZ(8,"span",5),t._uU(9),t.qZA()(),t.TgZ(10,"button",6),t.NdJ("click",function(){return e.resetGame()}),t._uU(11,"Reset"),t.qZA()(),t.TgZ(12,"div",7),t.YNc(13,g,2,1,"div",8),t.YNc(14,f,2,0,"div",9),t.YNc(15,b,6,1,"div",10),t.YNc(16,m,2,0,"div",11),t.qZA()()),2&o&&(t.xp6(9),t.Oqu(e.score),t.xp6(4),t.Q6J("ngForOf",e.board[0]),t.xp6(1),t.Q6J("ngIf","lost"===e.status),t.xp6(1),t.Q6J("ngIf","won"===e.status),t.xp6(1),t.Q6J("ngIf","reset"===e.status))},dependencies:[a.sg,a.O5,u],styles:[".box[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;align-items:center;grid-gap:30px;padding:15px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#141414;box-shadow:0 0 5px 3px #191919;border:1px solid rgb(49,49,49);color:#ee8f00;border-radius:6px;-webkit-user-select:none;user-select:none;margin:auto;min-width:520px;justify-content:space-between}.box-title[_ngcontent-%COMP%]{text-align:center;justify-content:center}.box-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 25px 23px 23px;gap:4px;align-items:center}.box-row[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;justify-content:center;gap:4px}.box-numb[_ngcontent-%COMP%]{text-align:right;color:#fff;background-color:#282727;border:1px solid rgb(86,56,22);border-radius:4px;padding:2px}.status-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 80px;gap:4px;align-items:center}.btn-field[_ngcontent-%COMP%]{background-color:#303030;border:1px solid rgb(96,96,96);border-radius:4px;padding:4px;min-width:25px;width:-moz-fit-content;width:fit-content;color:#ee8f00;transition:90ms;-webkit-user-select:none;user-select:none}.btn-field[_ngcontent-%COMP%]:hover{filter:brightness(1.2);transform:scale(1.2);cursor:pointer}.btn-pressed[_ngcontent-%COMP%]{filter:brightness(1.2);transform:scale(1.2)}@media (max-width: 728px){.box[_ngcontent-%COMP%]{grid-auto-flow:row;justify-content:center;gap:10px;justify-self:stretch;min-width:auto;width:90%}}.blocksField[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-rows:repeat(5,1fr);grid-template-columns:repeat(15,1fr);height:250px;box-sizing:border-box;box-shadow:0 0 5px 3px #191919;border:1px solid rgb(49,49,49);overflow:hidden}@media (max-width: 760px){.blocksField[_ngcontent-%COMP%]{height:175px}}@media (max-width: 535px){.blocksField[_ngcontent-%COMP%]{height:125px}}"]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(x),p.Bz]}),n})()}}]);