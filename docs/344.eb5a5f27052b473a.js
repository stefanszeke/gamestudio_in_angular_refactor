"use strict";(self.webpackChunkgamestudio_refactor=self.webpackChunkgamestudio_refactor||[]).push([[344],{344:(O,c,l)=>{l.r(c),l.d(c,{Game1024Module:()=>x});var e=l(256),a=l(895);function m(o,s){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("",t.value," ")}}let g=(()=>{class o{constructor(){this.value=0,this.hidden=!0,this.class="tile"}isEmpty(){return 0===this.value}mergeWith(t){return this.value===t.value&&(this.value*=2,t.value=0,!0)}getStyle(){if(this.hidden){if(0===this.value)return"tile tile-0"}else switch(this.value){case 1:return"tile tile-1";case 2:return"tile tile-2";case 4:return"tile tile-4";case 8:return"tile tile-8";case 16:return"tile tile-16";case 32:return"tile tile-32";case 64:return"tile tile-64";case 128:return"tile tile-128";case 256:return"tile tile-256";case 512:return"tile tile-512";case 1024:return"tile tile-1024";default:return"tile"}return"tile"}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-game1024-tile"]],inputs:{value:"value",hidden:"hidden"},decls:2,vars:2,consts:[[1,"tile",3,"ngClass"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,m,2,1,"span",1),e.qZA()),2&t&&(e.Q6J("ngClass",n.getStyle()),e.xp6(1),e.Q6J("ngIf",!n.hidden))},dependencies:[a.mk,a.O5],styles:[".tile[_ngcontent-%COMP%]{position:relative;display:grid;place-items:center;font-size:2.2rem;width:80px;height:80px;border-radius:16px;border:4px solid rgba(255,255,255,.455);border-left:6px solid rgba(199,92,25,.249);border-bottom:6px solid rgba(172,32,134,.259);-webkit-user-select:none;user-select:none;color:#fff;background-color:#393939;overflow:hidden}.tile-0[_ngcontent-%COMP%]{background-color:#2d2d2d;opacity:.1}.tile-1[_ngcontent-%COMP%]{background-color:#343448}.tile-2[_ngcontent-%COMP%]{background-color:#34345e}.tile-4[_ngcontent-%COMP%]{background-color:#353576}.tile-8[_ngcontent-%COMP%]{background-color:#3f2782}.tile-16[_ngcontent-%COMP%]{background-color:#3c0cc0}.tile-32[_ngcontent-%COMP%]{background-color:#7a7133}.tile-64[_ngcontent-%COMP%]{background-color:#556714}.tile-128[_ngcontent-%COMP%]{background-color:#416d03}.tile-256[_ngcontent-%COMP%]{background-color:#20922d}.tile-512[_ngcontent-%COMP%]{background-color:#9d5202}.tile-1024[_ngcontent-%COMP%]{background-color:#c34206;font-size:1.5rem}@media (max-width: 500px){.tile[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.3rem}.tile-1024[_ngcontent-%COMP%]{font-size:1rem}}"]}),o})();function h(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-game1024-tile",18),e.NdJ("click",function(i){const M=e.CHM(t).index,y=e.oxw().index,k=e.oxw();return e.KtG(k.debugClick(i,M,y))}),e.qZA()()}if(2&o){const t=s.$implicit,n=s.index,i=e.oxw().index,r=e.oxw();e.xp6(1),e.Q6J("value",t[i].value)("hidden",r.setHidden(n,i))}}function p(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,h,2,2,"div",5),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.gameField)}}function f(o,s){1&o&&(e.TgZ(0,"div",19),e._uU(1,"YOU lOST"),e.qZA())}function b(o,s){if(1&o&&(e.TgZ(0,"div",20),e._uU(1,"YOU WON "),e.TgZ(2,"p"),e._uU(3,"in"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7,"moves"),e.qZA()()),2&o){const t=e.oxw();e.xp6(5),e.Oqu(t.moveCount)}}function v(o,s){1&o&&(e.TgZ(0,"div",21),e._uU(1,"Resetting"),e.qZA())}const _=function(o){return{"grid-template-columns":o}},d=function(o){return{"btn-pressed":o}};let C=(()=>{class o{constructor(){this.gameField=[],this.size=4,this.movedOrMerged=!1,this.gameStatus="playing",this.moveCount=0,this.isUpPressed=!1,this.isLeftPressed=!1,this.isRightPressed=!1,this.isDownPressed=!1}ngOnInit(){this.generateBoard(),this.addRandomNumber(),this.addRandomNumber()}generateBoard(){this.gameField=new Array(this.size).fill(null).map(()=>new Array(this.size).fill(null).map(()=>new g))}setHidden(t,n){return 0===this.gameField[t][n].value}addRandomNumber(){let t=!1,n=Math.floor(11*Math.random())>8?2:1;for(;!t;){let i=Math.floor(Math.random()*this.size),r=Math.floor(Math.random()*this.size);0===this.gameField[i][r].value&&(this.gameField[i][r].value=n,t=!0)}}handleKeyboardEvent(t){const i={w:"up",s:"down",a:"left",d:"right"}[t.key];if(i&&(this.pressKey(i),"playing"===this.gameStatus)){if(this.movedOrMerged=!1,this.handleMove(i),this.movedOrMerged&&(this.addRandomNumber(),this.moveCount++),this.isWon())return void(this.gameStatus="won");if(this.isLost())return void(this.gameStatus="lost")}}handleMove(t){for(let n=0;n<this.size;n++){const i=this.makeTempArrayToRightBasedOnDirectionAndIndex(t,n);let r=this.arrayCanMoveRight(i);for(;r;)this.arrayMoveRight(i),r=this.arrayCanMoveRight(i),this.movedOrMerged=!0;this.arrayMergeRight(i),this.switchFromRightTempArrayToGameFieldBasedOnDirectionAndIndex(t,n,i)}}arrayCanMoveRight(t){for(let n=0;n<this.size-1;n++)if(t[n].value>0&&0===t[n+1].value)return!0;return!1}arrayMoveRight(t){for(let n=0;n<this.size-1;n++)t[n].value>0&&0===t[n+1].value&&(t[n+1].value=t[n].value,t[n].value=0,this.movedOrMerged=!0)}arrayMergeRight(t){for(let n=this.size-1;n>0;n--)t[n].value>0&&t[n].value===t[n-1].value&&(t[n].value*=2,t[n-1].value=0,this.movedOrMerged=!0);this.arrayMoveRight(t)}makeTempArrayToRightBasedOnDirectionAndIndex(t,n){let i=[];if("right"===t&&(i=this.gameField[n]),"left"===t&&(i=this.gameField[n].reverse()),"up"===t){for(let r=0;r<this.size;r++)i.push(this.gameField[r][n]);i=i.reverse()}if("down"===t)for(let r=0;r<this.size;r++)i.push(this.gameField[r][n]);return i}switchFromRightTempArrayToGameFieldBasedOnDirectionAndIndex(t,n,i){if("right"===t&&(this.gameField[n]=i),"left"===t&&(this.gameField[n]=i.reverse()),"up"===t){i=i.reverse();for(let r=0;r<this.size;r++)this.gameField[r][n]=i[r]}if("down"===t)for(let r=0;r<this.size;r++)this.gameField[r][n]=i[r]}isLost(){for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++)if(0===this.gameField[t][n].value)return!1;return!(this.canMergeAtRow()||this.canMergeAtColumn())}isWon(){for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++)if(1024===this.gameField[t][n].value)return!0;return!1}reset(){this.gameStatus="reset",setTimeout(()=>{this.gameStatus="playing"},500),this.gameField=[],this.movedOrMerged=!1,this.generateBoard(),this.moveCount=0,this.addRandomNumber(),this.addRandomNumber()}canMergeAtRow(){for(let t=0;t<this.size;t++)for(let n=0;n<this.size-1;n++)if(this.gameField[t][n].value==this.gameField[t][n+1].value)return!0;return!1}canMergeAtColumn(){for(let t=0;t<this.size-1;t++)for(let n=0;n<this.size;n++)if(this.gameField[t][n].value==this.gameField[t+1][n].value)return!0;return!1}getBiggestNumber(){let t=0;for(let n=0;n<this.size;n++)for(let i=0;i<this.size;i++)this.gameField[n][i].value>t&&(t=this.gameField[n][i].value);return t}debugClick(t,n,i){t.shiftKey&&(0===this.gameField[n][i].value?this.gameField[n][i].value=1:this.gameField[n][i].value*=2)}dispatchKeyboardEvent(t){const n=new KeyboardEvent("keydown",{key:t}),i=new KeyboardEvent("keyup",{key:t});document.dispatchEvent(n),setTimeout(()=>document.dispatchEvent(i),100)}handleKeyboardEvent3(t){switch(t.key){case"w":this.releaseKey("up");break;case"s":this.releaseKey("down");break;case"a":this.releaseKey("left");break;case"d":this.releaseKey("right")}}pressKey(t){switch(t){case"up":this.isUpPressed=!0;break;case"down":this.isDownPressed=!0;break;case"left":this.isLeftPressed=!0;break;case"right":this.isRightPressed=!0}}releaseKey(t){switch(t){case"up":this.isUpPressed=!1;break;case"down":this.isDownPressed=!1;break;case"left":this.isLeftPressed=!1;break;case"right":this.isRightPressed=!1}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-game1024"]],hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(r){return n.handleKeyboardEvent(r)},!1,e.evT)("keyup",function(r){return n.handleKeyboardEvent3(r)},!1,e.evT)},decls:36,vars:21,consts:[[1,"main-wrapper"],[1,"box","box-title"],[1,"box"],[1,"btn-field",3,"click"],[1,"gameBoard",3,"ngStyle"],[4,"ngFor","ngForOf"],["class","overlay lose-screen",4,"ngIf"],["class","overlay win-screen",4,"ngIf"],["class","overlay reset-screen",4,"ngIf"],[1,"controls"],[1,"control-btn","btn-up",3,"ngClass","click"],[1,"material-icons"],[1,"control-btn","btn-left",3,"ngClass","click"],[1,"control-btn","btn-empty"],[1,"fa-solid","fa-gamepad"],[1,"control-btn","btn-right",3,"ngClass","click"],[1,"control-btn","btn-down",3,"ngClass","click"],[2,"color","white"],[3,"value","hidden","click"],[1,"overlay","lose-screen"],[1,"overlay","win-screen"],[1,"overlay","reset-screen"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Game1024"),e.qZA()(),e.TgZ(4,"div",2)(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"h2"),e._uU(8),e.qZA(),e.TgZ(9,"button",3),e.NdJ("click",function(){return n.reset()}),e._uU(10,"Reset"),e.qZA()(),e.TgZ(11,"div",4),e.YNc(12,p,2,1,"div",5),e.YNc(13,f,2,0,"div",6),e.YNc(14,b,8,1,"div",7),e.YNc(15,v,2,0,"div",8),e.qZA(),e.TgZ(16,"div",9)(17,"div",10),e.NdJ("click",function(){return n.dispatchKeyboardEvent("w")}),e.TgZ(18,"i",11),e._uU(19,"arrow_drop_up"),e.qZA()(),e.TgZ(20,"div",12),e.NdJ("click",function(){return n.dispatchKeyboardEvent("a")}),e.TgZ(21,"i",11),e._uU(22,"arrow_left"),e.qZA()(),e.TgZ(23,"div",13),e._UZ(24,"i",14),e.qZA(),e.TgZ(25,"div",15),e.NdJ("click",function(){return n.dispatchKeyboardEvent("d")}),e.TgZ(26,"i",11),e._uU(27,"arrow_right"),e.qZA()(),e.TgZ(28,"div",16),e.NdJ("click",function(){return n.dispatchKeyboardEvent("s")}),e.TgZ(29,"i",11),e._uU(30,"arrow_drop_down"),e.qZA()()(),e.TgZ(31,"div",2)(32,"h4",17),e._uU(33,"use [WASD] to move or the arrows"),e.qZA(),e.TgZ(34,"p"),e._uU(35,"shift click to add value (use for debugging only !)"),e.qZA()()()),2&t&&(e.xp6(6),e.hij("moves: ",n.moveCount,""),e.xp6(2),e.hij("",n.getBiggestNumber(),"/1024"),e.xp6(3),e.Q6J("ngStyle",e.VKq(11,_,"repeat("+n.size+", 1fr)")),e.xp6(1),e.Q6J("ngForOf",n.gameField[0]),e.xp6(1),e.Q6J("ngIf","lost"===n.gameStatus),e.xp6(1),e.Q6J("ngIf","won"===n.gameStatus),e.xp6(1),e.Q6J("ngIf","reset"===n.gameStatus),e.xp6(2),e.Q6J("ngClass",e.VKq(13,d,n.isUpPressed)),e.xp6(3),e.Q6J("ngClass",e.VKq(15,d,n.isLeftPressed)),e.xp6(5),e.Q6J("ngClass",e.VKq(17,d,n.isRightPressed)),e.xp6(3),e.Q6J("ngClass",e.VKq(19,d,n.isDownPressed)))},dependencies:[a.mk,a.sg,a.O5,a.PC,g],styles:['.box[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;align-items:center;grid-gap:30px;padding:15px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#141414;box-shadow:0 0 5px 3px #191919;border:1px solid rgb(49,49,49);color:#ee8f00;border-radius:6px;-webkit-user-select:none;user-select:none;margin:auto;min-width:520px;justify-content:space-between}.box-title[_ngcontent-%COMP%]{text-align:center;justify-content:center}.box-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 25px 23px 23px;gap:4px;align-items:center}.box-row[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;justify-content:center;gap:4px}.box-numb[_ngcontent-%COMP%]{text-align:right;color:#fff;background-color:#282727;border:1px solid rgb(86,56,22);border-radius:4px;padding:2px}.status-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 80px;gap:4px;align-items:center}.btn-field[_ngcontent-%COMP%]{background-color:#303030;border:1px solid rgb(96,96,96);border-radius:4px;padding:4px;min-width:25px;width:-moz-fit-content;width:fit-content;color:#ee8f00;transition:90ms;-webkit-user-select:none;user-select:none}.btn-field[_ngcontent-%COMP%]:hover{filter:brightness(1.2);transform:scale(1.2);cursor:pointer}.btn-pressed[_ngcontent-%COMP%]{filter:brightness(1.2);transform:scale(1.2)}@media (max-width: 728px){.box[_ngcontent-%COMP%]{grid-auto-flow:row;justify-content:center;gap:10px;justify-self:stretch;min-width:auto;width:90%}}.box[_ngcontent-%COMP%]{grid-auto-flow:row;text-align:center}.gameBoard[_ngcontent-%COMP%]{margin:15px auto;position:relative;display:grid;width:-moz-fit-content;width:fit-content;box-shadow:0 0 8px 3px #191919;border-radius:4px}.move[_ngcontent-%COMP%]{display:grid;place-items:center;position:absolute;background-color:gray;color:#fff;opacity:.3;-webkit-user-select:none;user-select:none}.controls[_ngcontent-%COMP%]{position:relative;margin:10px auto 30px;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr 1fr 1fr;width:300px;font-family:initial;-webkit-user-select:none;user-select:none}.control-btn[_ngcontent-%COMP%]{position:relative;display:grid;place-items:center;width:100px;height:100px;font-size:4rem;border:2px solid rgb(104,104,104);background-color:#0c0d0e;color:#fff;transition:90ms;overflow:hidden}.control-btn[_ngcontent-%COMP%]:before{position:absolute;content:"";width:90%;height:90%;top:50%;left:50%;transform:translate(-50%,-50%);border:1px solid rgb(32,32,32);background-color:#0a0a0a;border-radius:100%;opacity:.5;transition:60ms}@media (hover: hover) and (pointer: fine){.control-btn[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(.95);background-color:#2d2c2c;font-size:2rem}.control-btn[_ngcontent-%COMP%]:hover:before{width:70%;height:70%}}.btn-empty[_ngcontent-%COMP%]{grid-column:2;grid-row:2;border:none;font-size:1.5rem;color:#484848}.btn-empty[_ngcontent-%COMP%]:hover{background-color:#0c0d0e;transform:none;cursor:default}.btn-empty[_ngcontent-%COMP%]:before{display:none}.btn-empty[_ngcontent-%COMP%]:hover:before{background-color:#2e2e2e}.btn-up[_ngcontent-%COMP%]{grid-column:2;grid-row:1;border-bottom:none;border-radius:6px 6px 0 0}.btn-left[_ngcontent-%COMP%]{grid-column:1;grid-row:2;border-right:none;border-radius:6px 0 0 6px}.btn-right[_ngcontent-%COMP%]{grid-column:3;grid-row:2;border-left:none;border-radius:0 6px 6px 0}.btn-down[_ngcontent-%COMP%]{grid-column:2;grid-row:3;border-top:none;border-radius:0 0 6px 6px}.btn-pressed[_ngcontent-%COMP%]{background-color:#2d2c2c;transform:scale(.95)}']}),o})();var u=l(782);const w=[{path:"",component:C}];let x=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(w),u.Bz]}),o})()}}]);